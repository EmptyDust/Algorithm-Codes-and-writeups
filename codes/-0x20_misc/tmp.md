# <center> 2023-2024学年第二学期《数学建模实践(1): 基础算法实践》
# <center> 课 程 报 告
| 姓名 | 学号 | 专业 | 成绩 |
| ---- | ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |
|      |      |      |

# <center> 巡检线路的排班


# 问题重述
## 问题的背景
&ensp;&ensp;&ensp;&ensp;某化工厂有26个点需要进行巡检以保证正常生产，各个点的巡检周期、巡检耗时、两点之间的连通关系及行走所需时间在附件中给出。
&ensp;&ensp;&ensp;&ensp;每个点每次巡检需要一名工人，巡检工人的巡检起始地点在巡检调度中心（XJ0022），工人可以按固定时间上班，也可以错时上班，在调度中心得到巡检任务后开始巡检。现需要建立模型来安排巡检人数和巡检路线，使得所有点都能按要求完成巡检，并且耗费的人力资源尽可能少，同时还应考虑每名工人在一时间段内（如一周或一月等）的工作量尽量平衡。
## 问题的重述
1. 如果采用固定上班时间，不考虑巡检人员的休息时间，采用每天三班倒，每班工作8小时左右，每班需要多少人，巡检线路如何安排，并给出巡检人员的巡检线路和巡检的时间表。
2. 如果巡检人员每巡检2小时左右需要休息一次，休息时间大约是5到10分钟，在中午12时和下午6时左右需要进餐一次，每次进餐时间为30分钟，仍采用每天三班倒，每班需要多少人，巡检线路如何安排，并给出巡检人员的巡检线路和巡检的时间表。
问题3. 如果采用错时上班，重新讨论问题1和问题2，试分析错时上班是否更节省人力。
格式规范：
# 问题分析
问题一：根据温度变化规律建立数学模型，目前，有关焊接区域的温度变化规律的研究大多是基于数据驱动的控制和调整，文献[2-3]是基于PID控制原理控制回焊炉中的温度，而缺乏相关机理模型，不利于了解到电路板在回焊炉内焊接的物理过程。所以本题难点在于需要建立机理模型，模型不仅要能够反映出电路板焊接的物理过程，同时又要与题目中所给的焊接区域温度变化曲线吻合。针对此问题，拟在热传导方程以及牛顿冷却定律的基础上建立数学模型。
问题二：在第一问已求得参数的基础上，又给定了各温区温度，要求确定电路板炉温曲线满足题目所要求的制程界限时电路板的最大过炉速度。本题可用先通过二分法求得最大速度大致区间，再在大致区间中遍历搜索，最后得到最大传输速度。
问题三：确定各温区的设定温度和传送带的过炉速度，使得理想的炉温曲线超过 到峰值所覆盖的面积最小。本题难点在于变量个数增多，解空间变大。但可通启发式算法进行求解。
问题四：在问题三的基础上，确定各温区的温度以及传送带过炉速度，使得以峰值温度为中心线的两侧超过217℃的炉温曲线应尽量对称，同时还要使得理想的炉温曲线超过到峰值所覆盖的面积最小。本题难点在于如何给定对称性指标，且该问题属于多目标优化问题，可通过动态综合加权法，将多目标函数转化为单目标函数。
1. 模型假设
（1）不考虑空气对流。
（2）假设电路板材料均匀，各项同性。
（3）当小温区之间的温度差较小时，间隙温度在两边温度不等的间隙中随位移线性变化且不考虑小温区边界附近的温度变化。
（4）当小温区之间的温度较大时，考虑小温区温度之间的影响。
（5）炉前以及炉后区域中环境温度随空间距离平缓变化最终趋近于室温。
1. 符号说明
符号	含义	单位
 
电路板在 时刻 厚度上的温度
℃
 
电路板进入回焊炉中外界温度	℃
 
牛顿冷却方程中的冷却系数	 

 
温度上升过程中在 的时间
 

 
温度大于217℃的时间	 

 
传送带过炉速度	 

 
峰值温度	℃
 
温区1-5设置的温度	℃
 
温区6设置的温度	℃
 
温区7设置的温度	℃
 
温区8-9设置的温度	℃
5. 模型的建立和求解
5.1 建模前的准备
5.1.1 实际问题的数学化处理
	如图1所示，电路板在回焊炉内焊接时，实际上是三维立体温度扩散。本文不计空气对流，因此可以忽略平行板高度和宽度，将立体平行板简化为只与厚度有关的一维空间。
 
图1 电路板在回焊炉传送示意图
5.1.2环境温度分布
（1）间隙温度分布
1）两边温度不等的间隙
根据热传导方程：
	 	（1）
到达稳态后，温度不随时间变化，即：
	 	（2）
故可得：
	 	（3）
进而
	 	（4）
由式（4）可知两个小温区之间的温度随空间距离成线性变化
           
图2 间隙两边温度不等                图3 间隙两边温度相等

2）两边温度相等的间隙
两边恒热源不断向间隙内供热，直到间隙内温度处处与两端温度相等，如图3所示。
（2）其他区域温度分布
根据假设（4），小温区9与小温区10温度相差较大，故考虑小温区9对小温区10的影响，本文对温区间的影响做简化处理，认为在小温区10中环境温度随空间距离线性变化，即
	 	（5）
又根据假设（5），炉前炉后区域随空间距离平缓变化最终趋近于室温，故可设炉前炉后温度的变化为
	 	（6）
其中， ， 为室温。
（3）总体温度分布
根据以上分析，我们可得大致的温度分布，如图4所示
 
图4 环境温度随空间距离分布情况
由图可见，回焊炉两端的环境温度与空间距离呈指数变化，最后趋近于室温，部分区域根据假设将温度线性化处理。
5.1.3 牛顿冷却定律
牛顿指出系统温度损失速度与系统和环境的温差成正比，即牛顿冷却定律：
	 	（7）
式中， 为系统的温度， 为系统外界温度， 为冷却系数。
5.2 问题一的建模与求解
5.2.1一维热传导方程引入
在物体中任取一块闭曲面区域 ，设它所包含的任一区域为 ，如图5所示。假设在 时刻，区域 内任一点 处的温度为 。
5.2.2 基于热传导方程的温度分布模型
5.2.3 基于牛顿冷却定律的温度分布模型
5.2.4 问题一模型求解
由于热传导方程模型和牛顿冷却定律模型中都存在未知参数，故需要先确定最优参数，再进行求解。
(1)热传导方程模型参数求解 
求解热传导方程模型中最优参数方法
由于建立的热传导方程属于抛物型方程，边值条件复杂难以求得解析解。采用有限差分法，将连续的定解区域用有效个离散点构成的网络来代替，把定解区域上的连续函数用网格上定义的离散变量的函数来近似，把原方程和定解条件中的微商用差商来近似。通过迭代求得参数下的电路板温度，最后通过最小二乘法确定最优参数。
求解最优参数步骤为：
Step 1：对求解区域进行网格剖析。设求解区域为 ， ，在空间维度上，将 做 等份，  ；在时间维度上，将 做 等份， 。将两组平行直线簇  将 分割成矩形网络，如图6所示。
 
图6 矩阵网络示意图
Step 2：建立隐式差分格式，分为以下两步：
1）将热传导方程离散化处理
	 	（19）
	 	（20）
故：
	 	（21）
令  ，则
	 	（22）
2）边界条件离散
	 	（23）
	 	 （24）
故：
	 	（25）
	 	（26）
	 	 （27）
故：
	 	（27）
Step 3：建立隐格式对应的方程组如下
	 	（28）
其中：
 
                     
Step 4：利用最小二乘法求得参数 。
（3）改变温区温度以及传送带速度后求解结果
改变各温区温度以及传送带速度后，小温区3、6、7中点及小温区8结束处焊接区域中心的温度如表所示：
表3 电路板在回焊炉中部分位置焊接区域的中心温度
位置	小温区3中点	小温区6中点	小温区7中点	小温区8结束处
温度	129.7557℃	167.9916℃	189.6012℃	223.8698℃
电路板炉温曲线如图11所示：
 
图11 改变温区温度以及传送带速度后的炉温曲线
5.3.2 问题二模型求解
5.4问题三的建模与求解
5.4.1问题三模型建立
6. 结果检验与误差分析
6.1问题二结果检验
	在问题二中，对传送带最大过炉速度进一步验证，当对最大过炉速度进行适当的升高时，可以发现电路板的炉温曲线不再满足题中要求的制程界限，对最大过炉速度进行适当的降低，可以发现电路板的炉温曲线满足题中要求的制程界限，因此可以验证问题二最大过炉速度解的正确性。
6.2问题三、四结果检验
固定已经得到的结果 的值，任意改变10次 的值，发现总体的目标函数值都有所上升，这初步验证了结果的较优性。
第四问中，范数 的最大值为199.50，而第四问中范数仅为35.87，并从图形中可以看出图形的对称性，这再次验证了结果的合理性。
6.3分段合理性分析
根据式（30），冷却系数 值实际上是随时间不断变化的，但本文做了简化处理，按照预热区、恒温区、回流区、冷却区进行分段， 值在这些段中相同，段间 值不同。最后求得的电路板焊接中心温度数据与试验数据比较如图23所示：
    图23  值分段时模型结果           图24  值取0.193时模型结果 
模型结果与原始实验数据的均方误差为：
	 	（45）
模型结果与原始实验数据的平均绝对误差为：
	 	（46）
 值分段求得时模型结果与原始实验数据根据公式（45）与公式（46）求得均方误差为2.81℃，平均绝对误差为1.73℃， 取定值0.193时模型结果与原始实验数据的均方误差为6.9475℃，平均绝对误差为4.8568℃， 值分段时模型结果的误差要小于 值不分段时的误差，验证了本题分段求取 值的合理性。
6.4对终止温度的分析
	在问题四中，已将目标函数做了标准化处理，从而导致对终止温度的要求较高，终止温度对结果的收敛性起到至关重要的作用，图26为终止温度为 时收敛曲线图。由图26可见，在终止时结果未收敛，为了进一步使曲线收敛，我们选择了二次退火，并大幅度降低终止温度，当终止温度 时，收敛效果较好，如图27所示。
     
图26  0.1℃时内能变化曲线          图27  0.0008℃时的内能变化曲线
7. 模型评价
7.1 模型优点：
（1）热传导方程模型：
使用热传导方程模型能够较好的反应出电路板在回焊炉中焊接的物理过程，考虑到了电路板在回焊炉中，温度在电路板厚度上的分布，有助于对回炉焊过程进行更加深入的研究。
（2）基于牛顿冷却定律模型：
	基于牛顿冷却定律模型是在热传导方程基础上简化条件后建立的，相比如热传导方程，基于牛顿冷却定律模型不再考虑温度在电路板厚度上的分布，求解简单，求解效率大大提高，有利于在此基础上进行其他优化问题的研究。
7.2 模型缺点：
（1）热传导方程模型：
使用热传导方程模型求解过程复杂，在较短的时间内难以求得最优的参数，并且对于厚度较薄的电路板，温度在厚度上的分布接近一致。
（2）基于牛顿冷却定律模型：
	基于牛顿冷却定律模型未考虑到电路板在回焊炉中温度在电路板厚度上的分布，对于厚度较厚的电路板在回焊炉中，模型过于简化。
8. 模型推广与改进
本文在考虑温度在两边温度不等的间隙中的分布时认为，温度随空间位置线性变化，如图所示，但在间隙与温区边界上，温度连续但不可导。故对温区与间隙边界上的温度分布进行修正，如图所示，此时，温度在间隙与温区边界上既连续又可导。
     
9. 参考文献
[1]汪学军. 多温区自动测控系统控制模型的建立与研究[D].中南大学,2007.
[2]雷翔霄,唐春霞,徐立娟.基于RBF-PID的热风回流焊温度控制[J].邵阳学院学报(自然科学版),2020,17(04):31-38.
[3]杨晓生. 多温区无铅回流焊炉控制系统的设计与实现[D]. 国防科学技术大学, 2009.
10. 程序附录
附录1：格式1——二级火箭燃料耗尽前飞行过程的源程序
function Rocket_period1()
%火箭升空第一阶段
t1=linspace(0, 800/15, 500);   %时间范围
Y0=[0
 0];%初始高度和速度height=0,velocity=0
[T1,Y1]=ode45(@rocket1, t1,  Y0);
figure(1) %绘制高度变化
plot(T1,Y1(:,1),'b--','Linewidth',2)
hold on
plot(T1(end), Y1(end, 1),'ro','Linewidth',2)
附录2：格式2——二级火箭燃料耗尽前飞行过程的源程序
Rocket_period2.m
function Rocket_period2()
%火箭升空第二阶段
load Rocket1 T1 Y1 a1 %导入第一阶段结果
t2=linspace(800/15,1400/15,500);  %second period时间范围
Y2_0=Y1(end,:);%初始高度和速度:第一阶段的末状态
[T2,Y2]=ode45(@rocket2, t2,  Y2_0);


 
课程报告成绩评阅表
考查内容	具    体   要   求	分值	评      分
			A	B	C	D	E	得分
报告质量	选题合适，文字通顺，格式规范，图表清楚，论述充分	30	30	27	24	21	≤18	
	数学模型理论分析深刻，能够对数学模型编程求解，计算结论严谨合理等	70	70	63	56	49	≤42	
成     绩	

教师签名：                

日    期：


